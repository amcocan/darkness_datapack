# ======= Shear Heads =======
# Detect type of entity and tag it.
execute as @e[type=minecraft:allay, tag=!allay] run tag @s add this
execute as @e[type=minecraft:armadillo, tag=!armadillo] run tag @s add armadillo
execute as @e[type=minecraft:axolotl, tag=!axolotl] run tag @s add axolotl
execute as @e[type=minecraft:bat, tag=!bat] run tag @s add bat
execute as @e[type=minecraft:bee, tag=!bee] run tag @s add bee
execute as @e[type=minecraft:blaze, tag=!blaze] run tag @s add blaze
execute as @e[type=minecraft:bogged, tag=!bogged] run tag @s add bogged
execute as @e[type=minecraft:breeze, tag=!breeze] run tag @s add breeze
execute as @e[type=minecraft:camel, tag=!camel] run tag @s add camel
execute as @e[type=minecraft:cat, tag=!cat] run tag @s add cat
execute as @e[type=minecraft:cave_spider, tag=!cave_spider] run tag @s add cave_spider
execute as @e[type=minecraft:chicken, tag=!chicken] run tag @s add chicken
execute as @e[type=minecraft:cod, tag=!cod] run tag @s add cod
execute as @e[type=minecraft:cow, tag=!cow] run tag @s add cow
execute as @e[type=minecraft:creaking, tag=!creaking] run tag @s add creaking
execute as @e[type=minecraft:creeper, tag=!creeper] run tag @s add creeper
execute as @e[type=minecraft:dolphin, tag=!dolphin] run tag @s add dolphin
execute as @e[type=minecraft:donkey, tag=!donkey] run tag @s add donkey
execute as @e[type=minecraft:drowned, tag=!drowned] run tag @s add drowned
execute as @e[type=minecraft:elder_guardian, tag=!elder_guardian] run tag @s add elder_guardian
execute as @e[type=minecraft:enderman, tag=!enderman] run tag @s add enderman
execute as @e[type=minecraft:endermite, tag=!endermite] run tag @s add endermite
execute as @e[type=minecraft:evoker, tag=!evoker] run tag @s add evoker
execute as @e[type=minecraft:fox, tag=!fox] run tag @s add fox
execute as @e[type=minecraft:frog, tag=!frog] run tag @s add frog
execute as @e[type=minecraft:ghast, tag=!ghast] run tag @s add ghast
execute as @e[type=minecraft:glow_squid, tag=!glow_squid] run tag @s add glow_squid
execute as @e[type=minecraft:goat, tag=!goat] run tag @s add goat
execute as @e[type=minecraft:guardian, tag=!guardian] run tag @s add guardian
execute as @e[type=minecraft:hoglin, tag=!hoglin] run tag @s add hoglin
execute as @e[type=minecraft:horse, tag=!horse] run tag @s add horse
execute as @e[type=minecraft:husk, tag=!husk] run tag @s add husk
execute as @e[type=minecraft:illusioner, tag=!illusioner] run tag @s add illusioner
execute as @e[type=minecraft:iron_golem, tag=!iron_golem] run tag @s add iron_golem
execute as @e[type=minecraft:llama, tag=!llama] run tag @s add llama
execute as @e[type=minecraft:magma_cube, tag=!magma_cube] run tag @s add magma_cube
execute as @e[type=minecraft:mooshroom, tag=!mooshroom] run tag @s add mooshroom
execute as @e[type=minecraft:mule, tag=!mule] run tag @s add mule
execute as @e[type=minecraft:ocelot, tag=!ocelot] run tag @s add ocelot
execute as @e[type=minecraft:panda, tag=!panda] run tag @s add panda
execute as @e[type=minecraft:parrot, tag=!parrot] run tag @s add parrot
execute as @e[type=minecraft:phantom, tag=!phantom] run tag @s add phantom
execute as @e[type=minecraft:pig, tag=!pig] run tag @s add pig
execute as @e[type=minecraft:piglin_brute, tag=!piglin_brute] run tag @s add piglin_brute
execute as @e[type=minecraft:pillager, tag=!pillager] run tag @s add pillager
execute as @e[type=minecraft:player, tag=!player] run tag @s add player
execute as @e[type=minecraft:polar_bear, tag=!polar_bear] run tag @s add polar_bear
execute as @e[type=minecraft:pufferfish, tag=!pufferfish] run tag @s add pufferfish
execute as @e[type=minecraft:rabbit, tag=!rabbit] run tag @s add rabbit
execute as @e[type=minecraft:ravager, tag=!ravager] run tag @s add ravager
execute as @e[type=minecraft:salmon, tag=!salmon] run tag @s add salmon
execute as @e[type=minecraft:sheep, tag=!sheep] run tag @s add sheep
execute as @e[type=minecraft:shulker, tag=!shulker] run tag @s add shulker
execute as @e[type=minecraft:silverfish, tag=!silverfish] run tag @s add silverfish
execute as @e[type=minecraft:skeleton_horse, tag=!skeleton_horse] run tag @s add skeleton_horse
execute as @e[type=minecraft:slime, tag=!slime] run tag @s add slime
execute as @e[type=minecraft:sniffer, tag=!sniffer] run tag @s add sniffer
execute as @e[type=minecraft:snow_golem, tag=!snow_golem] run tag @s add snow_golem
execute as @e[type=minecraft:spider, tag=!spider] run tag @s add spider
execute as @e[type=minecraft:squid, tag=!squid] run tag @s add squid
execute as @e[type=minecraft:stray, tag=!stray] run tag @s add stray
execute as @e[type=minecraft:strider, tag=!strider] run tag @s add strider
execute as @e[type=minecraft:tadpole, tag=!tadpole] run tag @s add tadpole
execute as @e[type=minecraft:trader_llama, tag=!trader_llama] run tag @s add trader_llama
execute as @e[type=minecraft:tropical_fish, tag=!tropical_fish] run tag @s add tropical_fish
execute as @e[type=minecraft:turtle, tag=!turtle] run tag @s add turtle
execute as @e[type=minecraft:vex, tag=!vex] run tag @s add vex
execute as @e[type=minecraft:villager, tag=!villager] run tag @s add villager
execute as @e[type=minecraft:vindicator, tag=!vindicator] run tag @s add vindicator
execute as @e[type=minecraft:wandering_trader, tag=!wandering_trader] run tag @s add wandering_trader
execute as @e[type=minecraft:warden, tag=!warden] run tag @s add warden
execute as @e[type=minecraft:witch, tag=!witch] run tag @s add witch
execute as @e[type=minecraft:wither, tag=!wither] run tag @s add wither
execute as @e[type=minecraft:wolf, tag=!wolf] run tag @s add wolf
execute as @e[type=minecraft:zoglin, tag=!zoglin] run tag @s add zoglin
execute as @e[type=minecraft:zombie_horse, tag=!zombie_horse] run tag @s add zombie_horse
execute as @e[type=minecraft:zombie_villager, tag=!zombie_villager] run tag @s add zombie_villager
execute as @e[type=minecraft:zombified_piglin, tag=!zombified_piglin] run tag @s add zombified_piglin

# Store the entity type for looting.
execute as @e[tag=!can_loot_head] run data modify storage entity:type type.name set from entity @s Tags.pos[0]

# Detect untaged entity and tag it with a tag for looting heads.
execute as @e[tag=allay] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=armadillo] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=axolotl] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=bat] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=bee] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=blaze] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=bogged] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=breeze] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=camel] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=cat] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=cave_spider] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=chicken] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=cod] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=cow] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=creaking] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=creeper] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=dolphin] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=donkey] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=drowned] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=elder_guardian] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=enderman] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=endermite] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=evoker] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=fox] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=frog] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=ghast] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=glow_squid] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=goat] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=guardian] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=hoglin] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=horse] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=husk] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=illusioner] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=iron_golem] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=llama] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=magma_cube] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=mooshroom] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=mule] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=ocelot] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=panda] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=parrot] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=phantom] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=pig] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=piglin_brute] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=pillager] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=player] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=polar_bear] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=pufferfish] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=rabbit] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=ravager] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=salmon] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=sheep] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=shulker] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=silverfish] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=skeleton_horse] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=slime] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=sniffer] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=snow_golem] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=spider] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=squid] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=stray] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=strider] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=tadpole] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=trader_llama] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=tropical_fish] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=turtle] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=vex] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=villager] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=vindicator] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=wandering_trader] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=warden] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=witch] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=wither] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=wolf] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=zoglin] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=zombie_horse] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=zombie_villager] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head
execute as @e[tag=zombified_piglin] unless entity @s[tag=can_loot_head] run tag @s add can_loot_head

# Detect shearing and check which entity is the closest.
# execute as @e[type=interaction, limit=1, sort=nearest] at @s if entity @e[type=minecraft:slime, distance=..1] run loot spawn ~ ~ ~ loot more_mob_heads:entities/slime

# ======= Shear Heads Loop =======
schedule function shearheads:detect 5t append